# CRM AI Web - 개발 환경 구성 가이드

## 📋 개요
이 프로젝트는 Next.js 기반의 CRM AI 웹 애플리케이션입니다.
MySQL 데이터베이스를 사용하며, Prisma ORM으로 데이터베이스를 관리합니다.

## ✅ 이미 완료된 작업

1. ✅ GitHub 저장소 클론 완료
   - 위치: `C:\Users\iyulab\crm-ai-project`

2. ✅ Node.js 확인 완료
   - 버전: v22.13.1

3. ✅ npm 패키지 설치 완료
   - 822개의 패키지 설치됨

4. ✅ 환경 변수 파일 생성 완료
   - `.env` 파일 생성됨

## 🔧 다음 단계: MySQL 설치 및 설정

### 옵션 1: 간단한 자동 설치 (권장)

프로젝트에 포함된 배치 파일을 사용하여 자동으로 설치할 수 있습니다:

```powershell
# 관리자 권한으로 PowerShell 실행 후
cd C:\Users\iyulab\crm-ai-project

# MySQL 설치 및 마이그레이션 실행
.\install-mysql-and-migrate.bat
```

이 스크립트는 다음을 수행합니다:
- MySQL Server 8.4 설치
- 데이터베이스 초기화
- 사용자 계정 생성 (dbuser/dbpassword)
- Prisma 마이그레이션 실행

### 옵션 2: 수동 MySQL 설치

1. **MySQL 다운로드 및 설치**
   - [MySQL 공식 사이트](https://dev.mysql.com/downloads/mysql/)에서 MySQL 8.4 다운로드
   - 설치 시 기본 설정으로 진행
   - Root 비밀번호는 비워두거나 기억하기 쉬운 것으로 설정

2. **데이터베이스 및 사용자 생성**
```sql
-- MySQL에 접속 후 실행
CREATE DATABASE crm_ai_web CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'dbuser'@'localhost' IDENTIFIED BY 'dbpassword';
GRANT ALL PRIVILEGES ON crm_ai_web.* TO 'dbuser'@'localhost';
FLUSH PRIVILEGES;
```

3. **Prisma 마이그레이션 실행**
```powershell
cd C:\Users\iyulab\crm-ai-project

# Prisma Client 생성
npx prisma generate

# 데이터베이스 스키마 생성
npx prisma db push

# 또는 마이그레이션 파일 생성
npx prisma migrate dev --name init
```

### 옵션 3: Docker 사용 (가장 간단)

Docker가 설치되어 있다면:

```powershell
# docker-compose.yml이 프로젝트에 있으므로
docker-compose up -d

# 데이터베이스가 준비되면
npx prisma db push
```

## 🚀 개발 서버 시작

MySQL 설정이 완료되면:

### 방법 1: 자동 시작 스크립트 사용 (권장)
```powershell
.\START.bat
```

이 스크립트는 다음을 수행합니다:
- Node.js 확인
- MySQL 서비스 확인 및 시작
- npm 패키지 확인
- 데이터베이스 설정
- 관리자 계정 생성
- 개발 서버 시작

### 방법 2: 수동으로 시작
```powershell
# 1. MySQL 서비스 시작 (관리자 권한 PowerShell)
Start-Service MySQL

# 2. 개발 서버 시작
npm run dev
```

## 📌 기본 접속 정보

### 웹 애플리케이션
- URL: http://localhost:3000
- 관리자 계정:
  - 이메일: admin@company.co.kr
  - 비밀번호: admin1234

### MySQL 데이터베이스
- 호스트: localhost:3306
- 데이터베이스: crm_ai_web
- 사용자: dbuser
- 비밀번호: dbpassword

### Prisma Studio (데이터베이스 GUI)
```powershell
npx prisma studio
```
- URL: http://localhost:5555

## 🛠️ 유용한 명령어

### Prisma 관련
```powershell
# Prisma Client 재생성
npx prisma generate

# 데이터베이스 스키마 동기화
npx prisma db push

# 마이그레이션 생성
npx prisma migrate dev --name <migration-name>

# Prisma Studio 실행
npx prisma studio
```

### 개발 서버
```powershell
# 개발 모드 실행
npm run dev

# 프로덕션 빌드
npm run build

# 프로덕션 모드 실행
npm start

# 린트 검사
npm run lint
```

### MySQL 서비스 관리 (관리자 PowerShell)
```powershell
# MySQL 시작
Start-Service MySQL

# MySQL 중지
Stop-Service MySQL

# MySQL 재시작
Restart-Service MySQL

# MySQL 상태 확인
Get-Service MySQL
```

## 📚 프로젝트 구조

```
crm-ai-project/
├── src/                    # 소스 코드
│   ├── app/               # Next.js App Router
│   ├── components/        # React 컴포넌트
│   └── lib/              # 유틸리티 및 라이브러리
├── prisma/                # Prisma 스키마 및 마이그레이션
│   ├── schema.prisma     # 데이터베이스 스키마
│   └── migrations/       # 마이그레이션 파일
├── public/               # 정적 파일
├── scripts/              # 유틸리티 스크립트
├── .env                  # 환경 변수 (생성됨)
├── package.json          # npm 설정
└── next.config.ts        # Next.js 설정
```

## ⚠️ 문제 해결

### MySQL 서비스가 시작되지 않을 때
```powershell
# 빠른 수정 시도
.\quick-start-mysql.bat

# 또는 상세 진단
.\fix-mysql.bat
```

### Prisma 마이그레이션 오류
```powershell
# 마이그레이션 상태 확인
npx prisma migrate status

# 마이그레이션 리셋 (주의: 데이터 삭제됨)
npx prisma migrate reset
```

### 포트 충돌 (3000번 포트)
```powershell
# 3000번 포트를 사용 중인 프로세스 찾기
Get-Process -Id (Get-NetTCPConnection -LocalPort 3000).OwningProcess

# 해당 프로세스 종료 또는 다른 포트 사용
# package.json의 dev 스크립트 수정: "dev": "next dev -p 3001"
```

## 📖 추가 리소스

- [Next.js 문서](https://nextjs.org/docs)
- [Prisma 문서](https://www.prisma.io/docs)
- [MySQL 문서](https://dev.mysql.com/doc/)
- [React 문서](https://react.dev)

## 💡 개발 팁

1. **핫 리로드**: 코드 변경 시 자동으로 새로고침됩니다.
2. **타입 안정성**: TypeScript를 사용하여 타입 안정성을 보장합니다.
3. **데이터베이스 변경**: `schema.prisma` 파일 수정 후 `npx prisma db push` 실행
4. **환경 변수**: `.env` 파일에서 설정을 변경할 수 있습니다.

## 🎯 다음 할 일

1. MySQL 설치 및 설정
2. `START.bat` 실행하여 개발 서버 시작
3. http://localhost:3000 접속하여 애플리케이션 확인
4. 관리자 계정으로 로그인하여 기능 테스트

---

**참고**: 이 가이드는 Windows 환경을 기준으로 작성되었습니다.
